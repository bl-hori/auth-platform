# ユースケース一覧 - 認可基盤プラットフォーム

## 管理者向けユースケース

### UC-ADM-001: 組織初期セットアップ
**アクター**: システム管理者  
**概要**: 新規組織の初期設定を行う  
**優先度**: 高  
**詳細フロー**:
1. 組織情報を登録（名称、ドメイン、連絡先）
2. デフォルトポリシーセットを選択
3. 管理者ユーザーを作成
4. IdP連携設定（オプション）
5. APIキーを生成

### UC-ADM-002: ロール定義
**アクター**: セキュリティ管理者  
**概要**: 新規ロールを定義し、権限を設定  
**優先度**: 高  
**詳細フロー**:
1. ロール名と説明を入力
2. 権限セットを選択または作成
3. リソースへのアクセスルールを定義
4. ロールの継承関係を設定（オプション）
5. ロールを有効化

### UC-ADM-003: 属性定義（ABAC）
**アクター**: セキュリティ管理者  
**概要**: 属性ベースの制御用属性を定義  
**優先度**: 高  
**詳細フロー**:
1. 属性カテゴリを選択（ユーザー/リソース/環境）
2. 属性名とデータ型を定義
3. 有効値の範囲を設定
4. デフォルト値を設定（オプション）
5. 属性を保存

### UC-ADM-004: リレーションシップ定義（ReBAC）
**アクター**: セキュリティ管理者  
**概要**: エンティティ間の関係性を定義  
**優先度**: 中  
**詳細フロー**:
1. エンティティタイプを選択
2. リレーションシップタイプを定義
3. 関係の方向性を設定
4. 権限の伝播ルールを定義
5. リレーションシップを保存

### UC-ADM-005: ポリシーテスト
**アクター**: 開発者/セキュリティ管理者  
**概要**: ポリシーの動作をテスト  
**優先度**: 高  
**詳細フロー**:
1. テスト対象ポリシーを選択
2. テストシナリオを作成
3. テストデータを入力
4. テストを実行
5. 結果を確認・分析

### UC-ADM-006: 監査ログ確認
**アクター**: 監査担当者  
**概要**: 認可決定の履歴を確認  
**優先度**: 高  
**詳細フロー**:
1. 検索条件を指定（期間、ユーザー、リソース等）
2. ログを検索
3. 詳細を確認
4. レポートをエクスポート（オプション）
5. 異常パターンを分析

### UC-ADM-007: ダッシュボード確認
**アクター**: システム管理者  
**概要**: システム状態とメトリクスを確認  
**優先度**: 中  
**詳細フロー**:
1. ダッシュボードにアクセス
2. リアルタイムメトリクスを確認
3. アラートを確認
4. トレンドを分析
5. 必要に応じてアクション実行

## 開発者向けユースケース

### UC-DEV-001: SDK統合
**アクター**: アプリケーション開発者  
**概要**: アプリケーションにSDKを統合  
**優先度**: 高  
**詳細フロー**:
1. 言語別SDKをダウンロード
2. 依存関係を設定
3. 初期化コードを実装
4. APIキーを設定
5. テスト実行

### UC-DEV-002: 認可チェック実装
**アクター**: アプリケーション開発者  
**概要**: アプリケーションに認可チェックを実装  
**優先度**: 高  
**詳細フロー**:
1. チェックポイントを特定
2. SDKメソッドを呼び出し
3. レスポンスを処理
4. エラーハンドリングを実装
5. ログを設定

### UC-DEV-003: カスタムポリシー作成
**アクター**: 開発者  
**概要**: アプリケーション固有のポリシーを作成  
**優先度**: 中  
**詳細フロー**:
1. Policy-as-Codeエディタを開く
2. Rego/Cedarでポリシーを記述
3. シンタックスチェック
4. ユニットテストを作成
5. ポリシーをデプロイ

### UC-DEV-004: ローカルPDP設定
**アクター**: DevOpsエンジニア  
**概要**: ローカルPolicy Decision Pointを設定  
**優先度**: 中  
**詳細フロー**:
1. PDPコンテナをデプロイ
2. Control Planeとの接続を設定
3. キャッシュ設定を調整
4. 監視を設定
5. 動作確認

### UC-DEV-005: CI/CD統合
**アクター**: DevOpsエンジニア  
**概要**: CI/CDパイプラインに認可テストを統合  
**優先度**: 中  
**詳細フロー**:
1. テストスイートを作成
2. パイプラインにステップ追加
3. テスト環境を設定
4. 自動テストを実行
5. 結果を検証

## エンドユーザー向けユースケース

### UC-USER-001: リソースアクセス
**アクター**: エンドユーザー  
**概要**: 許可されたリソースにアクセス  
**優先度**: 高  
**詳細フロー**:
1. アプリケーションにログイン
2. リソースへのアクセスを要求
3. システムが権限を確認
4. アクセスが許可/拒否される
5. 結果に応じた画面表示

### UC-USER-002: アクセス申請
**アクター**: エンドユーザー  
**概要**: 追加権限を申請  
**優先度**: 中  
**詳細フロー**:
1. アクセス申請フォームを開く
2. 必要な権限を選択
3. 理由を記入
4. 申請を送信
5. 承認結果を受信

### UC-USER-003: 権限委譲
**アクター**: リソースオーナー  
**概要**: 他のユーザーに権限を委譲  
**優先度**: 低  
**詳細フロー**:
1. 委譲設定画面を開く
2. 対象ユーザーを選択
3. 委譲する権限を選択
4. 有効期限を設定
5. 委譲を実行

## システム間連携ユースケース

### UC-SYS-001: IdP連携
**アクター**: Identity Provider  
**概要**: ユーザー情報を同期  
**優先度**: 高  
**詳細フロー**:
1. IdPがユーザー変更を検知
2. SCIMプロトコルで変更を通知
3. システムが変更を受信
4. 内部DBを更新
5. 確認応答を返却

### UC-SYS-002: Git連携（GitOps）
**アクター**: Gitリポジトリ  
**概要**: ポリシーをGitで管理  
**優先度**: 中  
**詳細フロー**:
1. ポリシー変更をコミット
2. Pull Requestを作成
3. レビュー・承認
4. マージ実行
5. 自動デプロイ

### UC-SYS-003: 監視システム連携
**アクター**: 監視システム  
**概要**: メトリクスとアラートを連携  
**優先度**: 中  
**詳細フロー**:
1. メトリクスをエクスポート
2. 監視システムが収集
3. 閾値を超えた場合アラート
4. 通知を送信
5. 自動スケーリング（オプション）

### UC-SYS-004: SIEM連携
**アクター**: SIEMシステム  
**概要**: セキュリティイベントを連携  
**優先度**: 中  
**詳細フロー**:
1. 認可イベントを生成
2. Syslog/HTTPで転送
3. SIEMが受信・解析
4. 相関分析を実行
5. インシデント検知

## 緊急対応ユースケース

### UC-EMG-001: 緊急アクセス遮断
**アクター**: セキュリティ管理者  
**概要**: 特定ユーザーのアクセスを即座に遮断  
**優先度**: 高  
**詳細フロー**:
1. 緊急対応画面にアクセス
2. 対象ユーザーを特定
3. アクセス権を無効化
4. 全PDPに即座に反映
5. インシデントレポート作成

### UC-EMG-002: ポリシーロールバック
**アクター**: システム管理者  
**概要**: ポリシーを以前のバージョンに戻す  
**優先度**: 高  
**詳細フロー**:
1. 問題のあるポリシーを特定
2. バージョン履歴を確認
3. ロールバック対象を選択
4. ロールバックを実行
5. 動作確認

### UC-EMG-003: 一時的特権昇格
**アクター**: 緊急対応チーム  
**概要**: 緊急時に一時的に特権を付与  
**優先度**: 中  
**詳細フロー**:
1. 緊急申請を作成
2. 承認者が即座に承認
3. 時限付き権限を付与
4. 作業を実行
5. 自動的に権限失効

---

**文書情報**
- バージョン: 1.0.0
- 作成日: 2025-10-25
- 作成者: Requirement Analyst Agent
- 関連文書: requirement_spec.md
